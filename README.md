
# Graph Schema Diff Tool

## Overview

`graph-schema-diff` is a service that compares two GraphQL schemas and identifies any breaking changes between them. The tool generates a structured JSON output and also creates a natural language summary suitable for release notes. The release notes are ideal for notifying users about API changes, ensuring smooth version upgrades for GraphQL services.

## Features

- Detects breaking and non-breaking changes between two GraphQL schemas.
- Outputs structured JSON format with details of changes.
- Provides a natural language summary of changes for API release notes.
- Easily integratable into release pipelines to automate change detection and notification.

## Structured JSON Example

Hereâ€™s an example of the output generated by the tool:

```json
{
  "changes": [
    {
      "type": "Query",
      "field": "getWeather",
      "change": "Renamed input parameter 'location' to 'city'",
      "breaking": true,
      "release_note": "The input parameter for `getWeather` has been renamed from `location` to `city`. This is a breaking change, so make sure to update any queries that use `location` to `city`."
    },
    {
      "type": "Weather",
      "field": "visibility",
      "change": "Added new scalar field 'visibility'",
      "breaking": false,
      "release_note": "We've added a new `visibility` field to the `Weather` type. You can now get visibility information in your weather queries without modifying existing ones. This is a non-breaking change."
    }
  ],
  "release_notes": {
    "summary": "This release introduces a breaking change with the renaming of the `location` parameter to `city` in the `getWeather` query, and a non-breaking enhancement with the addition of a new `visibility` field in the `Weather` type."
  }
}
```

## Sample Schemas

Below is an example of an initial and updated schema:

### Initial Schema (Version 1)

```graphql
type Query {
  getWeather(location: String!): Weather
}

type Weather {
  temperature: Float
  description: String
  humidity: Int
  windSpeed: Float
}
```

### Updated Schema (Version 2)

```graphql
type Query {
  getWeather(city: String!): Weather
}

type Weather {
  temperature: Float
  description: String
  humidity: Int
  windSpeed: Float
  visibility: Int
}
```

## Usage

The `graph-schema-diff` service can be integrated into release pipelines for GraphQL services. It compares the current and updated GraphQL schemas to automatically detect and communicate changes to API consumers.

This tool can be extended to support other API specifications such as REST, Swagger/OpenAPI, gRPC, and SOAP.

## Installation & Setup

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd graph-schema-diff
   ```

2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

3. Run the tool:
   ```bash
   python schema_diff.py --old-schema schema1.graphql --new-schema schema2.graphql
   ```
